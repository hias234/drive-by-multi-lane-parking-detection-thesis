\chapter{Related Work}
\label{chap:relatedwork}

This chapter will cover work related to park sensing and machine learning. Section \ref{sec:parksensing} will discuss different approaches to sensing current parking situations in cities. Furthermore, a comparison of them will be given as well as advantages and disadvantages of the specific approaches. \todo{Machine Learning...}



\section{Approaches to Park Sensing}
\label{sec:parksensing}

There already exist numerous approaches to detecting the states of parking spaces as well as the parking situation in a city. In this section parking detection approaches will be categorized in five different categories and in the following subsections several reference papers for all categories will be discussed. The first section about stationary park sensing (section \ref{sec:stationary_park_sensing}) will reference approaches where sensors are stationary deployed per parking space. Section \ref{sec:stationary_park_sensing_cameras} will cover camera-based systems which detect parking spaces in a dedicated area. Counting in- and outgoing vehicles to coarsely estimate parking space counts is discussed in section \ref{sec:counting_in_out_park_sensing}. Another approach is to detect certain events (for instance parking and unparking) to estimate parking space counts. Section \ref{sec:event_detection_park_sensing} will discuss several related papers in this area. Drive-by sensing will be discussed in sections \ref{sec:related_driveby_park_sensing_cameras} and \ref{sec:related_driveby_park_sensing_distance}. Using cameras to detect parking spaces while driving by will be referenced in section \ref{sec:related_driveby_park_sensing_cameras}, while section \ref{sec:related_driveby_park_sensing_distance} will cover using distance sensors. \todo{evtl. comparison, advantages, disadvantages section}



\subsection{Stationary Park Sensing}
\label{sec:stationary_park_sensing}

The most obvious and technically simple solution to park sensing is to use stationary sensors to determine the state of parking spaces. Usually one sensor per parking space is used which determines its state (occupied or vacant) and sends it to a central server. Several reference projects already exist \cite{SFPark, VehicleSense} implementing this technique. In this section as an example of all similar systems, the SFpark project will be examined.

In San Francisco a first prototype of the SFpark project \cite{SFPark} has been implemented from 2008 to 2011. In specific down town areas in San Francisco with high amounts of traffic, wireless stationary sensors have been placed at about 8.200 road side parking spaces. These sensors are able to detect the state of one parking space in real time and send this information to a central server. Furthermore, parking garages also count the in- and outgoing vehicles and shared this information, so that the parking situation in the areas with park sensing can be derived. The gained information is being shared as open data, so third party developers and researchers can also use the dataset for all kind of projects. Furthermore, there exists an App from SFpark itself to help drivers find available nearby parking spaces, navigate to it and pay as they go with their phones. 

A top priority goal of the SFpark project is to increase the availability of parking spaces in every block throughout the city. To achieve this goal, they are using demand responsive pricing. If (almost) all parking spaces in a neighbourhood are occupied for a long time, they raise the price in this specific area and vice versa if no parking spaces are occupied they lower prices. This leads to high overall parking space availabilities (20 - 40\%) and also to lower traffic congestion and lower greenhouse gas emissions. However, besides the advantages of high accuracy and being a real time system, there also are disadvantages. First of all, only metered parking spaces can be tracked, as sensors have to be installed per parking space, so areas where parking is allowed but there are no clearly marked parking spaces cannot be sensed with a reasonable accuracy. Furthermore, another big drawback are the high overall costs. The about 8.200 stationary sensors have to be bought, installed and maintained, which obviously causes high costs while only covering a tiny fraction of the overall San Francisco down town. So if the system should be available in the whole down town, costs would increase dramatically.

%Google Open Spot, London,





\subsection{Stationary Park Sensing using Cameras}
\label{sec:stationary_park_sensing_cameras}

Another approach while using stationary sensors is to use fixed deployed cameras which continuously record images of parking areas and analyze it for vacant parking spaces. Cameras can monitor up to one hundred parking spaces simultaneously with an accuracy up to 96 \%. Challenges of image detection are of course different lightning and weather conditions as well as occlusions depending on the angle which the camera records the parking scene. Detection algorithms using standard digital image processing will be discussed in this section as well as approaches using deep learning and Convolutional Neural Networks (CNNs).

\paragraph{Parking Detection using Digital Image Processing}

There exist a few common approaches using digital image processing to detect the state of parking spaces using a captured image of a parking area. First of all, edge detection is often used for parking space classification. Common edge detectors such as Canny Edge Detector or Sobel can be used to derive the edge pixels of an image. As next step the edges or edge pixels are counted and if they are above a certain threshold, the space will be detected as occupied. The assumption behind this approach is, that usually a vacant parking space has a plain surface and therefore a low amount of edges whereas a image of a parking car should have a lot of edges. Blumer et al. \cite{Blumer2012} and Liu et al. \cite{stationary_camera_sensing} both used this technique as part of their algorithms. 

Often a slightly different yet related approach is also used, namely object counting \cite{stationary_camera_sensing}. The edges of the image segment of a parking space are analyzed and closed contours (treated as objects) are detected and counted. Then again depending on a threshold which has to be set first, a parking space will be classified as either vacant or occupied depending on the object count.

Another common image processing technique is to use foreground/background information of the images. Using this approach the main background color is being identified and compared to the whole image. The background of a parking space can either be defined via extracting a certain part of an image which should always represent the main background color of a parking space's pavement (done by Blumer et al. \cite{Blumer2012}) or via an histogram of the image assuming that the background uses the most pixels in a recorded image (done by Liu et al. \cite{stationary_camera_sensing}). After the background color is available it is being subtracted from the original image and using thresholding foreground and background pixels are identified and counted. Depending on the count of the respective pixels, the parking space is then classified as vacant or occupied.

Liu et al. \cite{stationary_camera_sensing} used all of the above mentioned techniques to build a more stable prototype. They only tested their prototype indoors which is why weather and lightning conditions were no problems. With sensing only a maximum of seven cars, it provided an ensemble technique which should be more reliable. However, they did not include a statistic of how well their algorithm performed on a bigger dataset. Another ensemble method was developed by Blumer \cite{Blumer2012}. They used edge counts and background/foreground information as input for different machine learning techniques, which should then classify a parking space as vacant or occupied. Their plain algorithm achieved an accuracy of about 77.8\%. However, they improved it using frames of preceding and following images to identify parking/unparking events and then achieved an accuracy of about 88.8\%.

%\cite{Marmol2016}  Streetline, 
%arm smart camera \cite{stationary_camera_sensing_arm_smart_camera}

\paragraph{Parking Detection using Deep Learning and CNNs}

In recent years deep learning, which is a specific variant of neural networks, gained a lot of significance in the field of machine learning. For example in image recognition, convolutional neural networks (CNNs) preform nowadays as well as humans in classifying everyday objects in digital images. A CNN is a neural network with a possibly large amount of hidden layers of which some of them are convolutional layers, which take into account the spatial relationship between neighbouring pixels (in the case of image recognition). This rise in learning power also leads to projects which try to train CNNs in classifying the states of parking spaces while using camera images of a parking area.

In 2016 Amato et al. \cite{Amato2016} trained two different CNNs on classifying parking space states and compared their performances afterwards. They used the publicly available PKLot dataset as well as a dataset collected by themselves to train and evaluate their neural networks. In total they had over 700.000 images in different weather conditions and with different levels of quality (in some situations parking lots were almost fully occluded by trees or lamp posts, etc.). Results of the CNN's classifications were promising. Despite the fact that some of the images did not exactly match the parking space and there were a lot of occlusions, the best performing deep neural network gained an accuracy of above 91\% on all subsets of the datasets. 

Another work in the field of deep learning has been done by Di Mauro also in 2016 \cite{DiMauro2016}. They also used CNNs and the PKLot dataset as well as a self acquired dataset. However, they had a slightly different CNN as they also used a technique called pseudo-labelling of the data which can be seen as semi-supervised approach. When using pseudo-labelling both labelled and unlabelled data are used at the same time to train the network. For unlabelled data the label which was computed by the CNN in the forward pass is used, that is also why it is called pseudo-labelling. Furthermore, a different loss function has to be used as the pseudo labelled data has much less significance than the ground truth labelled data. Di Mauro et al. trained the CNN with about 5\% of the data and achieved an accuracy of above 96\% with a the fully supervised approach. The pseudo-labelling approach reached about the same levels of accuracy, however the dataset had to be balanced for it to work properly.


\paragraph{Advantages and Disadvantages of using stationary Cameras}

As described in this section, there is already a lot of research how cameras can be used to classify the states of parking spaces. Advantages of cameras are the high level of accuracy they reach while covering a lot of cars at once. However, most of the research focused on the use of cameras for detection the parking space situation of a single parking area, for instance in front of a super market. For this approach to work at a city wide scope, cameras would have to be mounted at least at every block. Similar to the dedicated sensors per parking space (section \ref{sec:stationary_park_sensing}) this would cause high costs not only in the form of hardware costs but also in installation and maintenance. Furthermore, mounting cameras throughout the city obviously brings up privacy issues.





\subsection{Counting In- and Outgoing Vehicles}
\label{sec:counting_in_out_park_sensing}

A rather simple approach of estimating the number of free parking spaces is to count in- and outgoing vehicles at parking zones. Zadeh et al. \cite{smarturbanparkingdetection} developed a prototype which counts all in- and outgoing vehicles using a Raspberry Pi and two ultrasonic range finders at each gate. Ultrasonic sensors measure the distance from the side of the road to a potentially passing vehicle. Two ultrasonic sensors are needed to detect if a vehicle is going in or out. According to the order in which the ultrasonic sensors detect a passing vehicle it is decided whether a vehicle is going in or out. Furthermore, the two sensors are also used to differentiate a passing person from a vehicle. Both sensors are as far apart as they can detect a vehicle at the same time but not a person. Using this technique misleading detections of passengers are filtered.

As described this technique is technically simple to develop and the hardware costs are also quite cheap. However, this system is only designed for parking areas which have a low number of gates where cars go in and out and not for a city wide deployment. For closed parking areas it is easy to detect in- and outgoing vehicles whereas it is hard to do so in open traffic and street scenarios. Furthermore, the counting also will not work with ultrasonic sensors in open street scenarios as there are often several lanes, which would make the sensing impossible as passing cars would possibly occlude each other.






\subsection{Event Detection based Park Sensing using Smartphones}
\label{sec:event_detection_park_sensing}

updetection\cite{Ma:2014:USP:2674918.2674929}

parsense \cite{Nawaz:2013:PSB:2500423.2500438}

pocketparker \cite{Nandugudi:2014:PPP:2632048.2632098}







\subsection{Drive-by Park Sensing using Cameras}
\label{sec:related_driveby_park_sensing_cameras}

\paragraph{ParkMaster}
 
parkmaster \cite{Grassi:2017:PIE:3132211.3134452}


\subsection{Drive-by Park Sensing using Distance Sensors}
\label{sec:related_driveby_park_sensing_distance}

\subsubsection{ParkNet}
\label{sec:parknet}

parknet... \cite{Mathur:2010:PDS:1814433.1814448}







\section{Machine Learning}

